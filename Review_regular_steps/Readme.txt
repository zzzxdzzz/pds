PDS4 数据包评审流程

（适用于光谱 / 高分辨率影像数据包）

1. 前言

本流程基于 SBN “Review PDS4 Data”页面中的说明。 

评审目的：确认数据包是否“完整”、可理解、可操作、可复现，且符合归档标准。 

本流程聚焦：

数据处理 pipeline 的变化对比分析

校准文档 (calibration) 验证

可复现性检查

空间数据（影像或光谱）几何/投影验算 + 渲染图比对

标签 (label) 内容完整性、单位 (unit)、数据值合理性

2. 准备工作

获取数据包（通常为 PDS4 格式，包括 xml label、数据文件、文档、校准文件等）

获取评审所需工具，例如：

ReadPDS (IDL) 或 ReadPDS for PDS4 (Python)（SBN 提供） 

可视化软件：如 SAOImageDS9（影像）、光谱可视化工具等 

确认你拿到的数据包版本、pipeline 版本、校准版本变更历史（数据集说明文档中应有）

建议先浏览 “Sample General Instructions” 或 “Minimum Required Feedback” 列表，了解评审关注点。 

3. 评审流程（步骤详述）
3.1 数据包概览

检查数据包的目录结构是否合理（如 /DATA, /CALIBRATION, /DOCUMENT/, /INDEX/ 等）

在说明文档（overview、README、collection level doc）中查找版本历史、pipeline 修改说明。例：某数据集表明 “The pipeline was re-run for each version since the first (V1.0) …” 

在说明文档中确认 “migration from PDS3 to PDS4” 情况、几何关键字是否用最新 SPICE kernels 计算、是否有 FITS header 未更新等说明。 

3.2 Pipeline 变化对比分析

在说明中找出「处理流程（Processing）」、「版本历史 (Version History)」条目。记录：pipeline重新运行次数、是否改变 FITS 数据还是只是 header、是否校准流程变更、是否几何关键字更新。 

对比：

前一版本 vs 当前版本：哪些步骤改变？（如校准系数更新、几何核更新、文件命名更改、标签语法变化）

检查是否说明 “pipeline rerun usually changes FITS headers but not the FITS data” 之类情况。 

在你的评审记笔记中，建议列出表格，如：版本号 | 日期 | 改动摘要 | 对影像/光谱数据可能的影响。

3.3 校准文档 & 可复现性验证

检查校准文档是否齐全：例如说明所用校准源、实验设备、参考文献、转换方程、单位说明。参考 “Minimum Required Feedback” 指南：如果是已校准数据，文档应“完全说明校准过程并包含所有必要参数以便重复”。 

查阅校准文件是否列入数据包（例如 CALIBRATION/ 或 DOCUMENT/ 校准报告）

对于原始 + 校准数据：建议尝试用一个原始数据文件，应用校准流程（如果可行）复现校准结果，以确认可复现性。

检查单位（unit）是否明确、是否合理。例如：影像数据 DN → radiance 或 reflectance 所用单位。光谱数据：counts → radiance 或 reflectance →物理单位（如 W/m²/µm/sr）。

检查校准文档是否提及 pipeline 版本、软件版本（如 ReadPDS Version, 或 SOC pipeline版本）以及几何/时间系统说明。

3.4 标签 (Label) 与 metadata 检查

检查每个产品（影像或光谱）是否有对应的 PDS4 xml label。

检查 Label 内容是否完整：包括但不限于以下关键项：

产品标识 (identifier)、目标 (target)、观测时间 (start/stop)、曝光时间、处理级别、关键几何参数（如 spacecraft-target distance, incidence/emission/phase angles）、坐标系统、投影方式／地图投影（如果适用）

单位 (units)：所有物理量是否附单位，单位是否合理／符合说明文档

数据文件引用：是否明确指出数据文件名、数据格式、扩展（如 FITS）

校准信息：是否指出校准系数／版本／参考文档

容错项：如果某值缺失、无效，是否使用 INVALID_CONSTANT 或 NaN 并在标签说明中注明。

检查元数据是否过度依赖外部文档：标签中应提供足够信息使用户能“使用编程方式仅凭标签信息读取数据”——这是 SBN 的要求之一。 

检查标签格式是否符合 PDS4 标准：xml 架构、关键字命名、namespace 等（如你熟悉 PDS4 标准的话可深查）。

3.5 数据值合理性 & 影像/光谱可视化检查

使用 ReadPDS 或可视化工具载入数据。检查：

对影像数据：是否显示正常（无大范围异常像素、饱和、条带、花斑等异常）

对光谱数据：谱线或连续谱是否合理、有无明显异常跳跃或噪声暴增

尝试一个简单的科研查询，例如 “在该影像中某区域有无明显亮度/反射率变化” 或 “光谱中在已知吸收波段是否看到预期特征”——SBN 建议这样做。 

检查单位是否在数据中正确体现：如单位为 radiance (W/m²/µm/sr) 或 reflectance (unitless) 等。若单位为空或不明确，列为缺陷。

检查数据中的无效或缺失值处理情况（如 NaN、INVALID_CONSTANT 等）是否合理并有说明。

3.6 空间几何／投影验证（高分辨率影像专用）

若数据包为影像且带有地理/投影信息，则进行以下验证：

检查标签中是否列有坐标系、投影方式 (map projection)、分辨率、像素尺寸、地理范围（经纬度或行星坐标系）

使用 GIS 或影像工具（如 QGIS、ArcGIS、甚至 Python 库）将影像投影至所述坐标系，渲染为地图图像。

渲染结果与说明文档或预期地图图有无差异（例如：影像方向、经纬度格网、投影畸变是否合理）

比较同一区域不同版本或不同处理级别影像：检查 pipeline 变化是否在投影／几何参数上造成差异（例如：使用了更新的 SPICE 核、更新的几何关键字）。说明文档中提到几何关键字更新时，FITs header 可能未更新。 

若是高分辨率影像堆栈或立体对，则可验证影像配准／几何校正是否合理，例如影像之间无明显错位。

在 readme 中建议记录：投影前后对比截图、GIS坐标范围、像素分辨率、地图投影名称、观察日期／时间。

3.7 Pipeline 变化影响验证

利用从 3.2 得到的 pipeline 变化信息，再结合 3.6、3.5 的结果，检验变化是否如说明中所述。比如：如果说明说“几何关键字用最新 SPICE 核重新计算”，则检验影像几何是否与旧版本有系统差异。

如果说明说“校准流程更新导致数据数值变化”，建议从某条数据（影像像元或光谱通道）旧版本 vs 新版本对比差异，分析差别原因。

记录发现：变化是否有益、是否存在倒退／异常、是否需要在标签中注明差异。

3.8 最终评审总结

根据 SBN 的评审要求（完整性、可理解性、可解释性、归档质量）做总体评价。 


列出发现的优点与缺陷（缺文档、标签缺关键元数据、单位不明确、校准说明不充分、几何／投影问题、数据异常等）

给出建议／修正项：例如补充标签关键字、更新校准说明、提供投影示例图、提供 pipeline 变更摘要等

若你认为数据集尚未达到可归档标准／用户易用标准，可建议“拒绝”或“暂缓归档直至修正”。（SBN 指出，评审者可拒绝数据集或提出必须改正项）